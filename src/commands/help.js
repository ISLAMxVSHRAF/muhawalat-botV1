// ==========================================
// üìñ HELP ‚Äî Slash Command (Paginated)
// ==========================================

const { SlashCommandBuilder, PermissionFlagsBits, EmbedBuilder, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');
const CONFIG = require('../config');

const ERR = CONFIG.ADMIN?.unifiedErrorMessage || '‚ùå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿØÿßÿÆŸÑŸä.';

// ‚úÖ FIX: 4 ÿµŸÅÿ≠ÿßÿ™ ‚Äî ÿ•ÿπÿßÿØÿ© ŸáŸäŸÉŸÑÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ™ÿ∫ÿ∑Ÿäÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©
function getPages(base) {
    return [
        // ==========================================
        // üìÑ ÿµŸÅÿ≠ÿ© 1 ‚Äî ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿßÿ™ ŸàÿßŸÑÿ•ÿπÿØÿßÿØ
        // ==========================================
        new EmbedBuilder()
            .setColor(CONFIG.COLORS.primary)
            .setTitle('üõ†Ô∏è ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ£ÿØŸÖŸÜ ‚Äî ŸÖÿ≠ÿßŸàŸÑÿßÿ™ | ÿµŸÅÿ≠ÿ© 1/4')
            .setDescription(`**üåê ÿßŸÑŸÖŸàŸÇÿπ:** [ŸÑŸàÿ≠ÿ© ÿßŸÑÿ£ÿØŸÖŸÜ](${base}/admin.html)`)
            .addFields(
                {
                    name: 'üöÄ ÿßŸÑÿ•ÿπÿØÿßÿØ',
                    value: '`/setup` ‚Äî ŸäŸÅÿ™ÿ≠ ŸÇÿßÿ¶ŸÖÿ© ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ®Ÿàÿ™ (ÿ™ŸÑŸÇÿßÿ¶Ÿä / ŸÖÿÆÿµÿµ / ÿ±ÿ®ÿ∑ ŸäÿØŸàŸä)',
                    inline: false
                },
                {
                    name: 'üë§ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°',
                    value: [
                        '`/register_members` ‚Äî Ÿäÿ≥ÿ¨ŸÑ ŸÉŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿ∞ŸàŸä ÿ±ŸàŸÑ ÿßŸÑŸÖŸäŸÖÿ®ÿ± ŸÅŸä ÿßŸÑÿØÿßÿ™ÿßÿ®Ÿäÿ≤',
                        '`/recreate_dashboard user:` ‚Äî ŸäÿπŸäÿØ ÿ®ŸÜÿßÿ° ÿßŸÑÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ŸÑÿπÿ∂Ÿà',
                        '`/create_thread user:` ‚Äî ŸäŸÜÿ¥ÿ¶ ŸÖÿ≥ÿßÿ≠ÿ© ÿ¨ÿØŸäÿØÿ© ŸÑÿπÿ∂Ÿà ÿ®ÿØŸàŸÜ ŸÖÿ≥ÿßÿ≠ÿ©',
                    ].join('\n'),
                    inline: false
                },
                {
                    name: 'üì± ŸÖÿ≥ÿßÿ≠ÿ© ÿßŸÑÿπÿ∂Ÿà (ÿßŸÑÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ)',
                    value: [
                        'ŸÅŸä ŸÖÿ≥ÿßÿ≠ÿ© ŸÉŸÑ ÿπÿ∂Ÿà ÿ™ÿ∏Ÿáÿ± ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿπÿßÿØÿßÿ™ ŸàÿßŸÑÿ£ŸáÿØÿßŸÅ ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™.',
                        '**üìù ÿ™ÿØŸàŸäŸÜ** ‚Äî ŸäŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ŸÑŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÅŸÉÿßÿ±ŸÉ Ÿàÿ™ÿØŸàŸäŸÜŸáÿß **ÿ®ÿ≥ÿ±Ÿäÿ©** ŸÅŸä ŸÖÿ≥ÿßÿ≠ÿ™ŸÉ ÿßŸÑÿÆÿßÿµÿ©.',
                        '**üóÇÔ∏è ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿØŸàŸäŸÜ** ‚Äî Ÿäÿπÿ±ÿ∂ ÿ™ÿØŸàŸäŸÜÿßÿ™ŸÉ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© ŸÖÿ±ÿ™ÿ®ÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ™ÿßÿ±ŸäÿÆ (ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿßÿµÿ© ÿ®ŸÉ ŸÅŸÇÿ∑).',
                    ].join('\n'),
                    inline: false
                },
            )
            .setFooter({ text: 'ÿµŸÅÿ≠ÿ© 1 ŸÖŸÜ 4 ‚Äî ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ŸÑŸÑÿ™ŸÜŸÇŸÑ' }),

        // ==========================================
        // üìÑ ÿµŸÅÿ≠ÿ© 2 ‚Äî ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑŸÖŸáÿßŸÖ
        // ==========================================
        new EmbedBuilder()
            .setColor(CONFIG.COLORS.warning)
            .setTitle('üõ†Ô∏è ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ£ÿØŸÖŸÜ ‚Äî ŸÖÿ≠ÿßŸàŸÑÿßÿ™ | ÿµŸÅÿ≠ÿ© 2/4')
            .addFields(
                {
                    name: 'üìù ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸäŸàŸÖŸäÿ©',
                    value: [
                        '`/daily_done` ‚Äî Ÿäÿπÿ±ÿ∂ ŸÖŸÜ ŸÉÿ™ÿ® ÿ™ŸÇÿ±Ÿäÿ±Ÿá ÿßŸÑŸÜŸáÿßÿ±ÿØÿ©',
                        '`/daily_missing` ‚Äî Ÿäÿπÿ±ÿ∂ ŸÖŸÜ ŸÑŸÖ ŸäŸÉÿ™ÿ® ÿ™ŸÇÿ±Ÿäÿ±Ÿá ÿ®ÿπÿØ',
                        '`/sync_reports thread_id: date:` ‚Äî Ÿäÿ≤ÿßŸÖŸÜ ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖŸÜ Thread ÿ®ÿ™ÿßÿ±ŸäÿÆ ŸÖÿπŸäŸÜ',
                    ].join('\n'),
                    inline: false
                },
                {
                    name: 'üìÖ ÿßŸÑÿ¥Ÿáÿ± ÿßŸÑŸÖÿÆÿµÿµ',
                    value: [
                        '`/start_month [duration:]` ‚Äî Ÿäÿ®ÿØÿ£ ÿ¥Ÿáÿ± ŸÖÿÆÿµÿµ ÿ¨ÿØŸäÿØ ŸàŸäŸèÿπŸäÿØ ÿ∂ÿ®ÿ∑ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿßÿ™ (ÿßŸÑŸÖÿØÿ© ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© 30 ŸäŸàŸÖÿßŸã).',
                        '`/end_month` ‚Äî Ÿäÿ∫ŸÑŸÇ ÿßŸÑÿ¥Ÿáÿ± ÿßŸÑŸÖÿÆÿµÿµ ÿßŸÑÿ≠ÿßŸÑŸä ŸäÿØŸàŸäÿßŸã.',
                    ].join('\n'),
                    inline: false
                },
                {
                    name: 'üìå ÿßŸÑŸÖŸáÿßŸÖ',
                    value: [
                        '`/task_create type: [image:]` ‚Äî ŸäŸÅÿ™ÿ≠ **Modal** ŸÑÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ŸàÿßŸÑŸàÿµŸÅÿå ÿ´ŸÖ ŸäŸÜÿ¥ÿ± ÿßŸÑŸÖŸáŸÖÿ© ŸÅŸä ÿßŸÑŸÖŸÜÿ™ÿØŸâ ŸÉŸÜÿµ ÿπÿßÿØŸä (+ ÿµŸàÿ±ÿ© ÿ•ŸÜ ŸàŸèÿ¨ÿØÿ™). ÿ£ÿ≥ÿ®ŸàÿπŸäÿ© ÿ™ŸÇŸÅŸÑ ÿ®ÿπÿØ 48 ÿ≥ÿßÿπÿ© | ÿ¥Ÿáÿ±Ÿäÿ© ÿ®ÿπÿØ 5 ÿ£ŸäÿßŸÖ. ÿßŸÑÿπÿ∂Ÿà Ÿäÿ≥ÿ¨ŸÑ ÿ®ŸÉÿ™ÿßÿ®ÿ© ÿ±ÿ≥ÿßŸÑÿ© ŸÅŸàŸÇ 10 ŸÉŸÑŸÖÿßÿ™ (ÿ≠ÿØ ÿ£ŸÇÿµŸâ ŸÖÿ±ÿ™ŸäŸÜ).',
                        '`/task_list` ‚Äî Ÿäÿπÿ±ÿ∂ ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑŸÜÿ¥ÿ∑ÿ© ŸàŸÖŸàÿπÿØ ŸÇŸÅŸÑŸáÿß',
                        '`/sync_tasks thread_id:` ‚Äî ÿ£ÿØÿÆŸÑ **ŸÖÿπÿ±ŸÅ ÿßŸÑÿ´ÿ±ŸäÿØ** ŸÅŸÇÿ∑ÿõ ÿ™ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿ®ÿ≥Ÿäÿ∑ÿ© ŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÜŸàÿπ (ÿ£ÿ≥ÿ®ŸàÿπŸä/ÿ¥Ÿáÿ±Ÿä) ŸàÿßŸÑÿ±ŸÇŸÖ/ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®ÿå ÿ´ŸÖ ÿ™Ÿèÿ≠ŸÅÿ∏ ŸÅŸä ÿßŸÑÿØÿßÿ™ÿßÿ®Ÿäÿ≤ ŸàŸäÿ™ŸÖ ŸÖÿ≤ÿßŸÖŸÜÿ© ÿßŸÑÿ•ÿ™ŸÖÿßŸÖ ŸÖŸÜ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ.',
                    ].join('\n'),
                    inline: false
                },
            )
            .setFooter({ text: 'ÿµŸÅÿ≠ÿ© 2 ŸÖŸÜ 4 ‚Äî ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ŸÑŸÑÿ™ŸÜŸÇŸÑ' }),

        // ==========================================
        // üìÑ ÿµŸÅÿ≠ÿ© 3 ‚Äî ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™ ŸàÿßŸÑÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™
        // ==========================================
        new EmbedBuilder()
            .setColor(CONFIG.COLORS.success)
            .setTitle('üõ†Ô∏è ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ£ÿØŸÖŸÜ ‚Äî ŸÖÿ≠ÿßŸàŸÑÿßÿ™ | ÿµŸÅÿ≠ÿ© 3/4')
            .addFields(
                {
                    name: 'üèÜ ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™',
                    value: [
                        '`/challenge_create [image:]` ‚Äî ŸäŸÅÿ™ÿ≠ **Modal** ŸÑÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ŸàÿßŸÑŸÖÿ≠ÿ™ŸàŸâÿå ÿ´ŸÖ ŸäŸÜÿ¥ÿ± ÿßŸÑÿ®Ÿàÿ≥ÿ™ ŸÅŸä ŸÇŸÜÿßÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™ ŸÉŸÜÿµ ÿπÿßÿØŸä (+ ÿµŸàÿ±ÿ© ÿ•ŸÜ ŸàŸèÿ¨ÿØÿ™). ÿßÿ≥ÿ™ÿÆÿØŸÖ `/sync_challenge` ŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿ´ÿ±ŸäÿØ ÿ®ÿßŸÑŸÖÿØÿ© ŸàÿßŸÑŸÜŸÇÿßÿ∑.',
                        '`/sync_challenge thread_id:` ‚Äî ÿ£ÿØÿÆŸÑ **ŸÖÿπÿ±ŸÅ ÿ´ÿ±ŸäÿØ ÿßŸÑÿ™ÿ≠ÿØŸä** ŸÅŸÇÿ∑ÿõ ÿ™ŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© ÿ®ÿ≥Ÿäÿ∑ÿ© (ÿßŸÑŸÖÿØÿ© ÿ®ÿßŸÑÿ£ŸäÿßŸÖÿå ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÜŸÇÿßÿ∑/ŸàŸÇÿ™ ÿßŸÑÿ™ÿ≠ÿØŸä) ŸàŸäŸèÿ±ÿ®ÿ∑ ÿßŸÑÿ™ÿ≠ÿØŸä ŸÅŸä ÿßŸÑÿØÿßÿ™ÿßÿ®Ÿäÿ≤.',
                        'ÿßŸÑÿπÿ∂Ÿà Ÿäÿ≥ÿ¨ŸÑ ÿ®ŸÉÿ™ÿßÿ®ÿ© ‚úÖ + ÿßŸÑŸàŸÇÿ™ ‚Äî ŸÖÿ´ÿßŸÑ: `ÿ™ŸÖ ‚úÖ - 30 ÿØŸÇŸäŸÇÿ©`. ÿßŸÑÿ™ÿ≠ÿØŸä ŸäŸÇŸÅŸÑ ŸàŸäÿπŸÑŸÜ ÿßŸÑŸÅÿßÿ¶ÿ≤ŸäŸÜ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿπŸÜÿØ ÿßŸÜÿ™Ÿáÿßÿ° ŸàŸÇÿ™Ÿá.',
                        '`/challenge_stats id:` ‚Äî ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ™ÿ≠ÿØŸä + ŸÑŸäÿØÿ±ÿ®Ÿàÿ±ÿØ ŸÉÿßŸÖŸÑ ÿ®ÿµŸÅÿ≠ÿßÿ™',
                        '`/challenge_end id:` ‚Äî ŸäŸÜŸáŸä ÿßŸÑÿ™ÿ≠ÿØŸä ŸäÿØŸàŸäÿßŸã ŸàŸäÿπŸÑŸÜ ÿßŸÑŸÅÿßÿ¶ÿ≤ŸäŸÜ',
                    ].join('\n'),
                    inline: false
                },
                {
                    name: '‚ö†Ô∏è ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™',
                    value: [
                        '`/warn user: [reason:]` ‚Äî Ÿäÿπÿ∑Ÿä ÿ•ŸÜÿ∞ÿßÿ± ŸäÿØŸàŸä ŸÖÿπ ÿßŸÑÿ≥ÿ®ÿ®',
                        '`/remove_warn user:` ‚Äî Ÿäÿ±ŸÅÿπ ÿ•ŸÜÿ∞ÿßÿ± Ÿàÿßÿ≠ÿØ ÿπŸÜ ÿπÿ∂Ÿà',
                        '`/clear_warns user:` ‚Äî ŸäŸÖÿ≥ÿ≠ ŸÉŸÑ ÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™ ÿπÿ∂Ÿà',
                        '`/warnings user:` ‚Äî Ÿäÿπÿ±ÿ∂ ÿ≥ÿ¨ŸÑ ÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™ ÿπÿ∂Ÿà',
                        '`/warnings_all` ‚Äî Ÿäÿπÿ±ÿ∂ ŸÉŸÑ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿ∞ŸàŸä ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™',
                        '`/timeout_list` ‚Äî Ÿäÿπÿ±ÿ∂ ÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÑŸä ŸàÿµŸÑŸàÿß 3 ÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™',
                    ].join('\n'),
                    inline: false
                },
            )
            .setFooter({ text: 'ÿµŸÅÿ≠ÿ© 3 ŸÖŸÜ 4 ‚Äî ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ŸÑŸÑÿ™ŸÜŸÇŸÑ' }),

        // ==========================================
        // üìÑ ÿµŸÅÿ≠ÿ© 4 ‚Äî ÿßŸÑÿ£ÿ™ŸÖÿ™ÿ© ŸàÿßŸÑÿ¨ÿØŸàŸÑÿ© ŸàÿßŸÑÿµŸäÿßŸÜÿ©
        // ==========================================
        new EmbedBuilder()
            .setColor(CONFIG.COLORS.info || CONFIG.COLORS.primary)
            .setTitle('üõ†Ô∏è ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ£ÿØŸÖŸÜ ‚Äî ŸÖÿ≠ÿßŸàŸÑÿßÿ™ | ÿµŸÅÿ≠ÿ© 4/4')
            .addFields(
                {
                    name: 'ü§ñ ÿßŸÑÿ±ÿØŸàÿØ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿäÿ©',
                    value: [
                        '`/autorespond_add [channels:] [match:]` ‚Äî ŸäŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© (Modal) ÿ™ŸÉÿ™ÿ® ŸÅŸäŸáÿß ÿßŸÑŸÉŸÑŸÖÿ© ÿ£Ÿà ÿßŸÑÿ¨ŸÖŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅÿ≤ÿ© ŸàŸÜÿµ ÿßŸÑÿ±ÿØÿå ŸÖÿπ ÿ•ŸÖŸÉÿßŸÜŸäÿ© ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÇŸÜŸàÿßÿ™ ŸàŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿßÿ®ŸÇÿ© ŸÖŸÜ ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ£ŸÖÿ±.',
                        '`/autorespond_list` ‚Äî Ÿäÿπÿ±ÿ∂ ŸÉŸÑ ÿßŸÑÿ±ÿØŸàÿØ Ÿàÿ≠ÿßŸÑÿ™Ÿáÿß',
                        '`/autorespond_toggle id:` ‚Äî ŸäŸÅÿπŸëŸÑ ÿ£Ÿà ŸäŸàŸÇŸÅ ÿ±ÿØ',
                        '`/autorespond_delete id:` ‚Äî Ÿäÿ≠ÿ∞ŸÅ ÿ±ÿØ ÿ™ŸÑŸÇÿßÿ¶Ÿä',
                    ].join('\\n'),
                    inline: false
                },
                {
                    name: 'üìÖ ÿßŸÑÿ¨ÿØŸàŸÑÿ©',
                    value: [
                        '`/schedule_add channel: repeat:` ‚Äî ŸäŸÅÿ™ÿ≠ ŸÜÿßŸÅÿ∞ÿ© (Modal) ŸÑÿßÿÆÿ™Ÿäÿßÿ± ŸàŸÇÿ™ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑÿå ÿßŸÑÿπŸÜŸàÿßŸÜÿå ŸÜÿµ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©ÿå Ÿàÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸäÿØŸäÿßÿå ÿ´ŸÖ Ÿäÿ∂ŸäŸÅ ÿ±ÿ≥ÿßŸÑÿ© ŸÖÿ¨ÿØŸàŸÑÿ© (ŸäŸàŸÖŸä/ÿ£ÿ≥ÿ®ŸàÿπŸä/ŸÖÿ±ÿ© Ÿàÿßÿ≠ÿØÿ©).',
                        '`/schedule_list` ‚Äî Ÿäÿπÿ±ÿ∂ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÖÿ¨ÿØŸàŸÑÿ© Ÿàÿ≠ÿßŸÑÿ™Ÿáÿß',
                        '`/schedule_pause id:` ‚Äî ŸäŸàŸÇŸÅ ÿ±ÿ≥ÿßŸÑÿ© ŸÖÿ§ŸÇÿ™ÿßŸã',
                        '`/schedule_resume id:` ‚Äî Ÿäÿ≥ÿ™ÿ£ŸÜŸÅ ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸàŸÇŸàŸÅÿ©',
                        '`/schedule_delete id:` ‚Äî Ÿäÿ≠ÿ∞ŸÅ ÿ±ÿ≥ÿßŸÑÿ© ŸÖÿ¨ÿØŸàŸÑÿ©',
                    ].join('\\n'),
                    inline: false
                },
                {
                    name: 'üß™ ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±',
                    value: [
                        '`/test_morning` ‚Äî ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿµÿ®ÿßÿ≠ ŸÅŸàÿ±ÿßŸã',
                        '`/test_evening` ‚Äî ŸÖÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ≥ÿßÿ° ŸÅŸàÿ±ÿßŸã',
                        '`/test_reset` ‚Äî ÿßŸÑÿ™ÿµŸÅŸäÿ± ÿßŸÑŸäŸàŸÖŸä ŸÅŸàÿ±ÿßŸã',
                        '`/test_weekly` ‚Äî ŸÑŸàÿ≠ÿ© ÿßŸÑÿ¥ÿ±ŸÅ ŸÅŸàÿ±ÿßŸã',
                        '`/test_daily` ‚Äî ŸäŸÜÿ¥ÿ¶ ÿ®Ÿàÿ≥ÿ™ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸäŸàŸÖŸä ŸÅŸàÿ±ÿßŸã',
                        '`/test_lock_daily` ‚Äî ŸäŸÇŸÅŸÑ ÿ®Ÿàÿ≥ÿ™ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ≥ÿßÿ®ŸÇ',
                        '`/test_lock_tasks` ‚Äî ŸäŸÇŸÅŸÑ ÿßŸÑÿ™ÿßÿ≥ŸÉÿßÿ™ ÿßŸÑŸÖŸÜÿ™ŸáŸäÿ© + ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÜÿßŸÇÿµŸäŸÜ',
                        '`/test_warnings` ‚Äî ŸÅÿ≠ÿµ ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸä ŸÅŸàÿ±ÿßŸã',
                        '`/test_challenges` ‚Äî ŸÅÿ≠ÿµ ÿßŸÑÿ™ÿ≠ÿØŸäÿßÿ™ ÿßŸÑŸÖŸÜÿ™ŸáŸäÿ© ŸÅŸàÿ±ÿßŸã',
                        '`/test_monthly` ‚Äî ÿ™ÿ∞ŸÉŸäÿ± ÿ£ŸáÿØÿßŸÅ ÿßŸÑÿ¥Ÿáÿ± ŸÅŸàÿ±ÿßŸã',
                    ].join('\n'),
                    inline: false
                },
                {
                    name: 'üìä ÿßŸÑÿµŸäÿßŸÜÿ©',
                    value: [
                        '`/debug_status` ‚Äî ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®Ÿàÿ™ (ÿ£ÿπÿ∂ÿßÿ° / uptime / ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸäŸàŸÖ)',
                        '`/db_backup` ‚Äî ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',
                    ].join('\n'),
                    inline: false
                },
            )
            .setFooter({ text: 'ÿµŸÅÿ≠ÿ© 4 ŸÖŸÜ 4 | ŸÖÿ≠ÿßŸàŸÑÿßÿ™ ‚Ä¢ Slash Commands' }),
    ];
}

// ‚úÖ FIX: ÿ™ÿ≠ÿØŸäÿ´ getRow ŸÑÿßÿ≥ÿ™Ÿäÿπÿßÿ® 4 ÿµŸÅÿ≠ÿßÿ™ (ÿßŸÑÿ™ÿ∫ŸäŸäÿ± ÿ™ŸÑŸÇÿßÿ¶Ÿä ÿπÿ®ÿ± total)
function getRow(page, total) {
    return new ActionRowBuilder().addComponents(
        new ButtonBuilder()
            .setCustomId(`help_prev_${page}`)
            .setLabel('‚óÄ ÿßŸÑÿ≥ÿßÿ®ŸÇ')
            .setStyle(ButtonStyle.Secondary)
            .setDisabled(page === 0),
        new ButtonBuilder()
            .setCustomId(`help_page_${page}`)
            .setLabel(`${page + 1} / ${total}`)
            .setStyle(ButtonStyle.Primary)
            .setDisabled(true),
        new ButtonBuilder()
            .setCustomId(`help_next_${page}`)
            .setLabel('ÿßŸÑÿ™ÿßŸÑŸä ‚ñ∂')
            .setStyle(ButtonStyle.Secondary)
            .setDisabled(page === total - 1)
    );
}

const data = new SlashCommandBuilder()
    .setName('help')
    .setDescription('ÿπÿ±ÿ∂ ŸÉŸÑ ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ£ÿØŸÖŸÜ ŸÖÿπ ÿ¥ÿ±ÿ≠ ŸÉŸÑ ÿ£ŸÖÿ±')
    .setDefaultMemberPermissions(PermissionFlagsBits.Administrator);

async function execute(interaction) {
    try {
        const base = process.env.WEB_BASE_URL || `http://localhost:${process.env.WEB_PORT || 3000}`;
        const pages = getPages(base);
        await interaction.reply({
            embeds: [pages[0]],
            components: [getRow(0, pages.length)],
            ephemeral: true
        });
    } catch (e) {
        console.error('‚ùå help:', e);
        await interaction.reply({ content: ERR, ephemeral: true }).catch(() => {});
    }
}

async function handleHelpButton(interaction) {
    try {
        const base = process.env.WEB_BASE_URL || `http://localhost:${process.env.WEB_PORT || 3000}`;
        const pages = getPages(base);
        const id = interaction.customId;

        let page = parseInt(id.split('_')[2]);
        if (id.startsWith('help_next_')) page = Math.min(page + 1, pages.length - 1);
        if (id.startsWith('help_prev_')) page = Math.max(page - 1, 0);

        await interaction.update({
            embeds: [pages[page]],
            components: [getRow(page, pages.length)]
        });
    } catch (e) {
        console.error('‚ùå help button:', e);
    }
}

module.exports = { data, execute, handleHelpButton };
