<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Ù…Ø­Ø§ÙˆÙ„Ø§Øª â€” Ø¨Ø±ÙˆÙØ§ÙŠÙ„ÙŠ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0C0C0F;--surface:#111115;--raise:#16161C;
  --border:rgba(255,255,255,.06);--border-hi:rgba(255,255,255,.12);
  --text:#E8E8EE;--muted:#55556A;--dim:#888899;
  --orange:#F26450;--yellow:#F5C842;--green:#3DD68C;--red:#F05050;
  --glass:rgba(255,255,255,.038);--glass-hi:rgba(255,255,255,.065);
  --blur:saturate(180%) blur(22px);--blur-sm:saturate(160%) blur(14px);
  --r:14px;--r-lg:20px;--r-xl:26px;
  --glow-o:0 0 60px rgba(242,100,80,.18);--glow-y:0 0 50px rgba(245,200,66,.14);
  --ease-s:cubic-bezier(.34,1.56,.64,1);--ease-o:cubic-bezier(.16,1,.3,1);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%;}
body{font-family:'Tajawal',sans-serif;background:var(--bg);color:var(--text);min-height:100dvh;overflow-x:hidden;-webkit-font-smoothing:antialiased;}
body::after{content:'';position:fixed;inset:0;z-index:9999;pointer-events:none;opacity:.03;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)'/%3E%3C/svg%3E");background-size:180px;}
#ambi{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;}
.blob{position:absolute;border-radius:50%;filter:blur(100px);mix-blend-mode:screen;animation:drift 20s ease-in-out infinite alternate;}
.b1{width:600px;height:600px;background:rgba(242,100,80,.055);top:-200px;right:-150px;animation-duration:22s;}
.b2{width:480px;height:480px;background:rgba(245,200,66,.04);bottom:10%;left:-100px;animation-duration:28s;animation-direction:alternate-reverse;}
@keyframes drift{from{transform:translate(0,0) scale(1)}to{transform:translate(40px,60px) scale(1.07)}}

/* SCREENS */
#load,#inv{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px;background:var(--bg);z-index:100;}
.slogo{width:52px;height:52px;background:var(--orange);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:var(--glow-o);animation:lp 2s ease-in-out infinite;}
@keyframes lp{0%,100%{box-shadow:0 0 20px rgba(242,100,80,.4)}50%{box-shadow:0 0 50px rgba(242,100,80,.7)}}
.spin{width:24px;height:24px;border:2.5px solid rgba(255,255,255,.08);border-top-color:var(--orange);border-radius:50%;animation:rot .7s linear infinite;}
@keyframes rot{to{transform:rotate(360deg)}}
.loadtxt{font-size:13px;color:var(--muted);}
.invtxt{font-size:20px;font-weight:800;margin-bottom:8px;}
.invsub{font-size:13px;color:var(--muted);text-align:center;max-width:280px;line-height:1.7;}

/* HEADER */
header{position:sticky;top:0;background:rgba(12,12,15,.8);backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);border-bottom:1px solid var(--border);height:56px;padding:0 20px;display:flex;align-items:center;justify-content:space-between;z-index:50;}
.hlogo{display:flex;align-items:center;gap:9px;}
.hico{width:28px;height:28px;background:var(--orange);border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:12px;box-shadow:0 0 16px rgba(242,100,80,.3);}
.hname{font-size:15px;font-weight:800;letter-spacing:-.3px;}
.tabs{display:flex;gap:3px;}
.tab{padding:7px 13px;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;border:none;background:transparent;color:var(--muted);font-family:inherit;transition:all .2s;white-space:nowrap;}
.tab.on{background:var(--glass);backdrop-filter:var(--blur-sm);-webkit-backdrop-filter:var(--blur-sm);color:var(--text);border:1px solid var(--border);}
.tab:hover:not(.on){color:var(--text);}

/* APP */
#app{display:none;max-width:720px;margin:0 auto;padding:20px 16px 80px;position:relative;z-index:1;}

/* HERO CARD */
.hero{background:var(--glass);backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:var(--r-xl);padding:26px;margin-bottom:14px;position:relative;overflow:hidden;animation:su .5s var(--ease-o) both;}
.hero::before{content:'';position:absolute;top:0;right:0;left:0;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent);}
.hero::after{content:'';position:absolute;top:0;right:0;left:0;height:3px;background:linear-gradient(90deg,var(--orange),var(--yellow));opacity:.85;}
@keyframes su{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:none}}

.htop{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;margin-bottom:18px;}
.hav{width:62px;height:62px;background:rgba(242,100,80,.1);border:1.5px solid rgba(242,100,80,.3);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:26px;font-weight:900;color:var(--orange);flex-shrink:0;box-shadow:0 0 30px rgba(242,100,80,.15);animation:lp 4s ease-in-out infinite;}
.hinfo{flex:1;}
.hname{font-size:22px;font-weight:900;letter-spacing:-.5px;margin-bottom:7px;}
.hrank{display:inline-flex;align-items:center;gap:6px;background:rgba(245,200,66,.09);border:1px solid rgba(245,200,66,.22);color:var(--yellow);font-size:12px;font-weight:600;padding:4px 12px;border-radius:100px;box-shadow:var(--glow-y);}

.hgoal{font-size:13px;color:var(--dim);line-height:1.7;border-right:3px solid var(--orange);border-radius:0 8px 8px 0;background:rgba(242,100,80,.04);padding:10px 14px;margin-bottom:18px;}

.hstats{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}
.hst{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:12px;padding:12px 10px;text-align:center;transition:all .3s;}
.hst:hover{border-color:rgba(242,100,80,.22);box-shadow:0 4px 20px rgba(242,100,80,.08);}
.hst-n{font-size:22px;font-weight:900;color:var(--orange);letter-spacing:-.5px;}
.hst-l{font-size:10px;color:var(--muted);margin-top:4px;}

/* SECTION */
.sec{background:var(--glass);backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);border:1px solid var(--border);border-radius:var(--r-lg);overflow:hidden;margin-bottom:12px;position:relative;animation:su .5s var(--ease-o) both;}
.sec::before{content:'';position:absolute;top:0;right:0;left:0;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);}
.sch{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-bottom:1px solid var(--border);}
.sct{font-size:14px;font-weight:700;}
.scm{font-size:11px;color:var(--muted);}
.scb{padding:16px 20px;}

/* PROGRESS */
.plbl{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-bottom:8px;}
.pt{height:6px;background:rgba(255,255,255,.06);border-radius:100px;overflow:hidden;}
.pf{height:100%;border-radius:100px;background:linear-gradient(90deg,var(--orange),var(--yellow));box-shadow:0 0 10px rgba(242,100,80,.35);transition:width 1.2s var(--ease-s);}

/* HABITS */
.hitem{display:flex;align-items:center;gap:12px;padding:12px 20px;border-bottom:1px solid rgba(255,255,255,.04);transition:background .15s;}
.hitem:last-child{border-bottom:none;}
.hitem:hover{background:rgba(255,255,255,.02);}
.hck{width:24px;height:24px;border-radius:7px;border:1.5px solid rgba(255,255,255,.14);display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0;transition:all .3s;}
.hck.done{background:var(--green);border-color:var(--green);box-shadow:0 0 12px rgba(61,214,140,.4);}
.hn{font-size:14px;flex:1;transition:all .3s;}
.hn.done{text-decoration:line-through;color:var(--muted);}

/* CHART */
.chart{display:flex;align-items:flex-end;gap:8px;height:110px;padding:0 4px;}
.cc{flex:1;display:flex;flex-direction:column;align-items:center;gap:5px;}
.cbw{flex:1;width:100%;display:flex;align-items:flex-end;}
.cb{width:100%;border-radius:7px 7px 0 0;background:rgba(255,255,255,.05);min-height:4px;transition:height .9s var(--ease-s);position:relative;overflow:hidden;}
.cb.hi{background:linear-gradient(180deg,var(--yellow),var(--orange));}
.cb.hi::after{content:'';position:absolute;inset:0;background:linear-gradient(to bottom,rgba(255,255,255,.15),transparent);}
.cb.today{background:var(--orange);box-shadow:0 0 18px rgba(242,100,80,.5);}
.cb.today::after{content:'';position:absolute;inset:0;background:linear-gradient(to bottom,rgba(255,255,255,.2),transparent);}
.clbl{font-size:10px;color:var(--muted);}
.cpct{font-size:10px;font-weight:700;}

/* ACH */
.agrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:10px;}
.ac{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:14px;padding:16px 12px;text-align:center;transition:all .3s;}
.ac.earn{border-color:rgba(245,200,66,.3);background:rgba(245,200,66,.06);box-shadow:0 0 20px rgba(245,200,66,.08);}
.ac.lock{opacity:.3;filter:grayscale(.6);}
.ai{font-size:26px;margin-bottom:7px;display:block;}
.ac.earn .ai{filter:drop-shadow(0 0 8px rgba(245,200,66,.4));}
.an{font-size:12px;font-weight:700;margin-bottom:3px;}
.ad{font-size:10px;color:var(--muted);}

/* LB */
.lbr{display:flex;align-items:center;gap:12px;padding:12px 20px;border-bottom:1px solid rgba(255,255,255,.04);transition:background .15s;}
.lbr:last-child{border-bottom:none;}
.lbr:hover{background:rgba(255,255,255,.02);}
.lbr.me{background:rgba(242,100,80,.06);border-right:3px solid var(--orange);}
.lrk{font-size:15px;font-weight:900;width:26px;text-align:center;}
.lnm{flex:1;font-size:13px;font-weight:700;}
.lmt{font-size:11px;color:var(--muted);}
.lrt{font-size:20px;font-weight:900;color:var(--orange);letter-spacing:-.5px;}

/* GOAL BANNER */
.gbanner{background:rgba(245,200,66,.07);border:1px solid rgba(245,200,66,.2);border-radius:12px;padding:16px 18px;font-size:14px;line-height:1.8;box-shadow:var(--glow-y);}

/* PAGES */
.tp{display:none;}
.tp.on{display:block;animation:su .3s var(--ease-o) both;}
.empty{padding:40px;text-align:center;color:var(--muted);font-size:14px;}

@media(max-width:500px){
  .hstats{grid-template-columns:1fr 1fr;}
  .tabs{overflow-x:auto;gap:2px;scrollbar-width:none;}
  .tabs::-webkit-scrollbar{display:none;}
  .tab{padding:7px 10px;font-size:11px;}
}
::-webkit-scrollbar{width:4px;}::-webkit-scrollbar-track{background:transparent;}::-webkit-scrollbar-thumb{background:rgba(242,100,80,.3);border-radius:10px;}
</style>
</head>
<body>
<div id="ambi"><div class="blob b1"></div><div class="blob b2"></div></div>

<div id="load"><div class="slogo">âœ³ï¸</div><div class="spin"></div><div class="loadtxt">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨Ø±ÙˆÙØ§ÙŠÙ„Ùƒ...</div></div>
<div id="inv" style="display:none"><div style="font-size:52px;margin-bottom:8px">â°</div><div class="invtxt">Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø±Ø§Ø¨Ø·</div><div class="invsub">Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ§Ù„Ø­ 24 Ø³Ø§Ø¹Ø© ÙÙ‚Ø·.<br>Ø§Ø·Ù„Ø¨ Ø±Ø§Ø¨Ø·Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†.</div></div>

<header>
  <div class="hlogo"><div class="hico">âœ³ï¸</div><div class="hname">Ù…Ø­Ø§ÙˆÙ„Ø§Øª</div></div>
  <div class="tabs">
    <button class="tab on" onclick="showTab('home',this)">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button class="tab"    onclick="showTab('stats',this)">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</button>
    <button class="tab"    onclick="showTab('lb',this)">ğŸ† Ø§Ù„Ù„ÙŠØ¯Ø±Ø¨ÙˆØ±Ø¯</button>
  </div>
</header>

<div id="app">

  <!-- HOME -->
  <div class="tp on" id="tab-home">
    <div class="hero">
      <div class="htop">
        <div class="hav" id="hav">Ù…</div>
        <div class="hinfo">
          <div class="hname" id="uname">...</div>
          <div class="hrank" id="urank">ğŸŒ± Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ø­Ù„Ø©</div>
        </div>
      </div>
      <div class="hgoal" id="ugoal">...</div>
      <div class="hstats">
        <div class="hst"><div class="hst-n" id="sstreak">0</div><div class="hst-l">ğŸ”¥ Ø³ØªØ±ÙŠÙƒ</div></div>
        <div class="hst"><div class="hst-n" id="stotal">0</div><div class="hst-l">âœ… Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div></div>
        <div class="hst"><div class="hst-n" id="srate">0%</div><div class="hst-l">ğŸ“ˆ Ø§Ù„ÙŠÙˆÙ…</div></div>
        <div class="hst"><div class="hst-n" id="swarn" style="color:var(--red)">0</div><div class="hst-l">âš ï¸ Ø¥Ù†Ø°Ø§Ø±Ø§Øª</div></div>
      </div>
    </div>

    <div class="sec" style="animation-delay:.1s">
      <div class="sch"><div class="sct">Ø¹Ø§Ø¯Ø§ØªÙŠ Ø§Ù„ÙŠÙˆÙ…</div><div class="scm" id="hcount"></div></div>
      <div class="scb">
        <div class="plbl"><span>Ø§Ù„ØªÙ‚Ø¯Ù…</span><span id="ppct">0%</span></div>
        <div class="pt"><div class="pf" id="pfill" style="width:0%"></div></div>
      </div>
      <div id="hlist"></div>
    </div>

    <div class="sec" id="wgsec" style="display:none;animation-delay:.2s">
      <div class="sch"><div class="sct">ğŸ¯ Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div></div>
      <div class="scb"><div class="gbanner" id="wgtxt"></div></div>
    </div>
  </div>

  <!-- STATS -->
  <div class="tp" id="tab-stats">
    <div class="sec">
      <div class="sch"><div class="sct">ğŸ“ˆ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div></div>
      <div class="scb"><div class="chart" id="wchart"><div class="empty" style="width:100%">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div></div></div>
    </div>
    <div class="sec" style="animation-delay:.1s">
      <div class="sch"><div class="sct">ğŸ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</div><div class="scm" id="achcnt"></div></div>
      <div class="scb"><div class="agrid" id="achgrid"></div></div>
    </div>
  </div>

  <!-- LB -->
  <div class="tp" id="tab-lb">
    <div class="sec">
      <div class="sch"><div class="sct">ğŸ† Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø±Ù Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</div></div>
      <div id="lblist"><div class="empty"><div class="spin" style="margin:0 auto 10px"></div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div></div>
    </div>
  </div>

</div>

<script>
const A='';
const tok=new URLSearchParams(location.search).get('token');
const RANKS=[{min:0,l:'ğŸŒ± Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ø­Ù„Ø©'},{min:7,l:'âš¡ ÙŠØ¨Ù†ÙŠ Ø§Ù„Ø¹Ø§Ø¯Ø©'},{min:30,l:'ğŸ¦ Ù…Ø­ØªØ±Ù Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…'},{min:100,l:'ğŸ‘‘ Ø£Ø³Ø·ÙˆØ±Ø©'}];
const ACHS=[
  {t:'first_day',i:'ğŸŒ±',n:'Ø£ÙˆÙ„ Ø®Ø·ÙˆØ©',d:'Ø£ÙƒÙ…Ù„Øª Ø£ÙˆÙ„ ÙŠÙˆÙ… ÙƒØ§Ù…Ù„'},
  {t:'week_streak',i:'ğŸ”¥',n:'Ø£Ø³Ø¨ÙˆØ¹ ÙƒØ§Ù…Ù„',d:'7 Ø£ÙŠØ§Ù… Ø³ØªØ±ÙŠÙƒ'},
  {t:'month_streak',i:'ğŸ’',n:'Ø´Ù‡Ø± Ù…Ø«Ø§Ø¨Ø±Ø©',d:'30 ÙŠÙˆÙ… Ø³ØªØ±ÙŠÙƒ'},
  {t:'century_streak',i:'ğŸ‘‘',n:'Ù…Ø¦Ø© ÙŠÙˆÙ…',d:'100 ÙŠÙˆÙ… Ø³ØªØ±ÙŠÙƒ'},
  {t:'century_tasks',i:'âš¡',n:'100 Ø¹Ø§Ø¯Ø©',d:'Ø£Ù†Ø¬Ø²Øª 100 Ø¹Ø§Ø¯Ø©'},
  {t:'half_k_tasks',i:'ğŸš€',n:'500 Ø¹Ø§Ø¯Ø©',d:'Ø£Ù†Ø¬Ø²Øª 500 Ø¹Ø§Ø¯Ø©'},
  {t:'thousand_tasks',i:'ğŸ†',n:'Ø£Ù„Ù Ø¹Ø§Ø¯Ø©',d:'Ø£Ù†Ø¬Ø²Øª 1000 Ø¹Ø§Ø¯Ø©'},
];

addEventListener('DOMContentLoaded',async()=>{
  if(!tok)return inv();
  try{
    const r=await fetch(`${A}/api/member/me`,{headers:{'x-member-token':tok}});
    if(!r.ok)return inv();
    const d=await r.json();
    renderProfile(d); renderHabits(d.habits,d.rate);
    if(d.weeklyGoal){document.getElementById('wgsec').style.display='block';document.getElementById('wgtxt').textContent=d.weeklyGoal;}
    document.getElementById('load').style.display='none';
    document.getElementById('app').style.display='block';
    renderChart(d.analytics.weeklyReport);
    renderAch(d.achievements);
    loadLB();
  }catch{inv();}
});

function inv(){document.getElementById('load').style.display='none';document.getElementById('inv').style.display='flex';}

function renderProfile({user,analytics,rate}){
  const s=analytics.streakDays||0;
  const rank=RANKS.filter(r=>s>=r.min).pop().l;
  document.getElementById('hav').textContent=user.name?.[0]||'Ù…';
  document.getElementById('uname').textContent=user.name;
  document.getElementById('urank').textContent=rank;
  document.getElementById('ugoal').textContent=user.goal||user.bio||'Ù„Ù… ØªØ­Ø¯Ø¯ Ù‡Ø¯ÙØ§Ù‹ Ø¨Ø¹Ø¯';
  document.getElementById('sstreak').textContent=s;
  document.getElementById('stotal').textContent=user.total_done||0;
  document.getElementById('srate').textContent=rate+'%';
  document.getElementById('swarn').textContent=user.warning_count||0;
  document.title=`Ù…Ø­Ø§ÙˆÙ„Ø§Øª â€” ${user.name}`;
}

function renderHabits(habits,rate){
  const done=habits.filter(h=>h.completed).length;
  document.getElementById('hcount').textContent=`${done}/${habits.length}`;
  document.getElementById('ppct').textContent=rate+'%';
  setTimeout(()=>{document.getElementById('pfill').style.width=rate+'%';},150);
  document.getElementById('hlist').innerHTML=habits.length
    ?habits.map(h=>`<div class="hitem"><div class="hck ${h.completed?'done':''}">${h.completed?'âœ“':''}</div><div class="hn ${h.completed?'done':''}">${h.name}</div></div>`).join('')
    :'<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø§Ø¯Ø§Øª Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯</div>';
}

function renderChart(wr){
  if(!wr?.length)return;
  const days=['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø§Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª'];
  const todayI=new Date().getDay();
  const chart=document.getElementById('wchart');chart.innerHTML='';
  wr.forEach(d=>{
    const rate=Math.round(d.rate);const di=new Date(d.date).getDay();const isToday=di===todayI;
    const col=document.createElement('div');col.className='cc';
    const pc=rate>=70?'var(--green)':rate>=40?'var(--yellow)':'var(--muted)';
    col.innerHTML=`<div class="cpct" style="color:${pc}">${rate}%</div><div class="cbw"><div class="cb ${isToday?'today':'hi'}" style="height:${Math.max(rate,4)}%"></div></div><div class="clbl">${days[di].slice(0,3)}</div>`;
    chart.appendChild(col);
  });
}

function renderAch(earned){
  const et=new Set(earned.map(a=>a.type));
  document.getElementById('achcnt').textContent=`${et.size}/${ACHS.length}`;
  document.getElementById('achgrid').innerHTML=ACHS.map(a=>`<div class="ac ${et.has(a.t)?'earn':'lock'}"><span class="ai">${a.i}</span><div class="an">${a.n}</div><div class="ad">${a.d}</div></div>`).join('');
}

async function loadLB(){
  try{
    const r=await fetch(`${A}/api/member/leaderboard`,{headers:{'x-member-token':tok}});
    const d=await r.json();const m=['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
    document.getElementById('lblist').innerHTML=d.map((l,i)=>`<div class="lbr ${l.isMe?'me':''}">
      <div class="lrk">${m[i]||i+1}</div>
      <div><div class="lnm">${l.name}${l.isMe?' <span style="color:var(--orange);font-size:10px">(Ø£Ù†Øª)</span>':''}</div><div class="lmt">ğŸ”¥ ${l.streak} ÙŠÙˆÙ…</div></div>
      <div class="lrt">${l.avgRate}%</div>
    </div>`).join('');
  }catch{}
}

function showTab(name,btn){
  document.querySelectorAll('.tp').forEach(p=>p.classList.remove('on'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
  document.getElementById(`tab-${name}`).classList.add('on');
  btn.classList.add('on');
}
</script>
</body>
</html>
